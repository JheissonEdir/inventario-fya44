<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventario del Colegio Fe y Alegría 44 - 2025</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 10px; background: #fff; }
        h2 { color: #b71c1c; text-align: center; margin-bottom: 0; }
        h3 { color: #b71c1c; text-align: center; margin-top: 8px; }
        .subtitulo { text-align: center; color: #b71c1c; font-size: 1.1em; margin-bottom: 18px; }
        form { background: #fff; padding: 16px; border-radius: 8px; box-shadow: 0 2px 8px #0001; max-width: 600px; margin: 0 auto; }
        form label { display: block; margin-bottom: 8px; font-size: 1em; }
        form input, form select { width: 100%; padding: 7px; margin-top: 2px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 1em; }
        .btn { padding: 10px 18px; margin: 6px 2px; border: none; border-radius: 4px; background: #b71c1c; color: #fff; font-size: 1em; cursor: pointer; font-weight: bold; }
        .btn:hover { background: #d32f2f; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; background: #fff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px #0001; }
        th, td { border: 1px solid #e57373; padding: 8px 4px; text-align: left; font-size: 0.97em; }
        th { background: #ffcdd2; color: #b71c1c; }
        @media (max-width: 800px) {
            form, table { max-width: 100%; font-size: 0.98em; }
            th, td { font-size: 0.95em; }
        }
        @media (max-width: 600px) {
            form { padding: 8px; }
            table, thead, tbody, th, td, tr { display: block; }
            thead { display: none; }
            tr { margin-bottom: 15px; background: #fff; border-radius: 8px; box-shadow: 0 1px 4px #0001; }
            td { border: none; border-bottom: 1px solid #eee; position: relative; padding-left: 50%; min-height: 36px; }
            td:before {
                position: absolute;
                top: 8px; left: 8px; width: 45%;
                white-space: nowrap;
                font-weight: bold;
                color: #b71c1c;
                content: attr(data-label);
            }
        }
        footer { margin-top:40px; text-align:center; color:#b71c1c; font-size:1em; }
        hr { border: 0; border-top: 2px solid #b71c1c; }
    </style>
</head>
<body>
    <h2>Inventario del Colegio Fe y Alegría 44</h2>
    <div class="subtitulo">Inventario 2025</div>
    <form id="formulario">
        <label>Nivel:
            <select name="nivel" required>
                <option value="Inicial">Inicial</option>
                <option value="Primaria">Primaria</option>
                <option value="Secundaria">Secundaria</option>
            </select>
        </label>
        <label>Aula Funcional: <input name="aula_funcional" required></label>
        <label>Denominación: <input name="denominacion" required></label>
        <label>Marca: <input name="marca"></label>
        <label>Modelo: <input name="modelo"></label>
        <label>Tipo:
            <select name="tipo" required>
                <option value="Mobiliario">Mobiliario</option>
                <option value="Equipo">Equipo</option>
                <option value="Material">Material</option>
                <option value="Otro">Otro</option>
            </select>
        </label>
        <label>Color: <input name="color"></label>
        <label>Serie: <input name="serie"></label>
        <label>Largo: <input name="largo" type="number" step="0.01"></label>
        <label>Ancho: <input name="ancho" type="number" step="0.01"></label>
        <label>Alto: <input name="alto" type="number" step="0.01"></label>
        <label>Documento de Alta: <input name="documento_alta"></label>
        <label>Fecha de Compra: <input name="fecha_compra" type="date"></label>
        <label>Número de Documento: <input name="numero_documento"></label>
        <label>Estado:
            <select name="estado" required>
                <option value="Bueno">Bueno</option>
                <option value="Regular">Regular</option>
                <option value="Malo">Malo</option>
            </select>
        </label>
        <label>Procedencia:
            <select name="procedencia" required>
                <option value="UGEL">UGEL</option>
                <option value="Fe y Alegría">Fe y Alegría</option>
                <option value="Jesuitas">Jesuitas</option>
                <option value="Otra">Otra</option>
            </select>
        </label>
        <label>Observaciones: <input name="observaciones"></label>
        <label>Usuario Responsable: <input name="usuario_responsable"></label>
        <label>Ubicación: <input name="ubicacion"></label>
        <button type="submit" class="btn">Agregar</button>
        <button type="button" class="btn" onclick="exportarCSV()">Exportar a CSV</button>
        <button type="button" class="btn" onclick="limpiarInventario()">Limpiar Inventario</button>
    </form>
    <h3>Inventario Actual</h3>
    <table id="tabla">
        <thead>
        <tr>
            <th>Nivel</th><th>Aula</th><th>Denominación</th><th>Marca</th><th>Modelo</th><th>Tipo</th><th>Color</th><th>Serie</th><th>Largo</th><th>Ancho</th><th>Alto</th><th>Doc. Alta</th><th>Fecha Compra</th><th>N° Doc</th><th>Estado</th><th>Procedencia</th><th>Obs.</th><th>Usuario</th><th>Ubicación</th><th>Fecha Registro</th>
        </tr>
        </thead>
        <tbody></tbody>
    </table>
    <footer>
        <hr style="margin:18px 0;">
        <b>Sistema realizado por Max System</b><br>
        <span>Inventario del Colegio Fe y Alegría 44 &mdash; 2025</span><br>
        &copy; <span id="anio"></span> Derechos reservados
    </footer>
    <script>
    const inventario = [];
    const tabla = document.querySelector('#tabla tbody');
    document.getElementById('anio').textContent = new Date().getFullYear();

    function renderTabla() {
        tabla.innerHTML = '';
        inventario.forEach(item => {
            const tr = document.createElement('tr');
            Object.values(item).forEach((val, i) => {
                const td = document.createElement('td');
                td.setAttribute('data-label', tabla.parentElement.rows[0].cells[i].textContent);
                td.textContent = val;
                tr.appendChild(td);
            });
            tabla.appendChild(tr);
        });
    }

    document.getElementById('formulario').onsubmit = function(e) {
        e.preventDefault();
        const data = Object.fromEntries(new FormData(this));
        // Validación de duplicados (nivel, aula_funcional, denominacion, serie)
        if (inventario.some(row => row.nivel === data.nivel && row.aula_funcional === data.aula_funcional && row.denominacion === data.denominacion && row.serie === data.serie)) {
            alert('¡Registro duplicado!');
            return;
        }
        data.fecha_registro = new Date().toISOString().slice(0,10);
        inventario.push(data);
        renderTabla();
        this.reset();
    };

    function exportarCSV() {
        if (inventario.length === 0) {
            alert('No hay datos para exportar.');
            return;
        }
        const encabezados = Object.keys(inventario[0]);
        const filas = inventario.map(obj => encabezados.map(k => '"'+(obj[k]||'')+'"').join(','));
        const csv = [encabezados.join(','), ...filas].join('\r\n');
        const blob = new Blob([csv], {type: 'text/csv'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'inventario_aula.csv';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }

    function limpiarInventario() {
        if (confirm('¿Seguro que deseas limpiar el inventario?')) {
            inventario.length = 0;
            renderTabla();
        }
    }
    </script>
</body>
</html>
